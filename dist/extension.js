(()=>{var e={273:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CsvParserStream=void 0;const n=r(193),o=r(203),i=r(698),s=r(856);class a extends o.Transform{parserOptions;decoder;parser;headerTransformer;rowTransformerValidator;lines="";rowCount=0;parsedRowCount=0;parsedLineCount=0;endEmitted=!1;headersEmitted=!1;constructor(e){super({objectMode:e.objectMode}),this.parserOptions=e,this.parser=new s.Parser(e),this.headerTransformer=new i.HeaderTransformer(e),this.decoder=new n.StringDecoder(e.encoding),this.rowTransformerValidator=new i.RowTransformerValidator}get hasHitRowLimit(){return this.parserOptions.limitRows&&this.rowCount>=this.parserOptions.maxRows}get shouldEmitRows(){return this.parsedRowCount>this.parserOptions.skipRows}get shouldSkipLine(){return this.parsedLineCount<=this.parserOptions.skipLines}transform(e){return this.rowTransformerValidator.rowTransform=e,this}validate(e){return this.rowTransformerValidator.rowValidator=e,this}emit(e,...t){return"end"===e?(this.endEmitted||(this.endEmitted=!0,super.emit("end",this.rowCount)),!1):super.emit(e,...t)}_transform(e,t,r){if(this.hasHitRowLimit)return r();const n=a.wrapDoneCallback(r);try{const{lines:t}=this,r=t+this.decoder.write(e),o=this.parse(r,!0);return this.processRows(o,n)}catch(e){return n(e)}}_flush(e){const t=a.wrapDoneCallback(e);if(this.hasHitRowLimit)return t();try{const e=this.lines+this.decoder.end(),r=this.parse(e,!1);return this.processRows(r,t)}catch(e){return t(e)}}parse(e,t){if(!e)return[];const{line:r,rows:n}=this.parser.parse(e,t);return this.lines=r,n}processRows(e,t){const r=e.length,n=o=>{const i=e=>e?t(e):o%100!=0?n(o+1):void setImmediate((()=>n(o+1)));if(this.checkAndEmitHeaders(),o>=r||this.hasHitRowLimit)return t();if(this.parsedLineCount+=1,this.shouldSkipLine)return i();const s=e[o];this.rowCount+=1,this.parsedRowCount+=1;const a=this.rowCount;return this.transformRow(s,((e,t)=>{if(e)return this.rowCount-=1,i(e);if(!t)return i(new Error("expected transform result"));if(t.isValid){if(t.row)return this.pushRow(t.row,i)}else this.emit("data-invalid",t.row,a,t.reason);return i()}))};n(0)}transformRow(e,t){try{this.headerTransformer.transform(e,((r,n)=>r?t(r):n?n.isValid?n.row?this.shouldEmitRows?this.rowTransformerValidator.transformAndValidate(n.row,t):this.skipRow(t):(this.rowCount-=1,this.parsedRowCount-=1,t(null,{row:null,isValid:!0})):this.shouldEmitRows?t(null,{isValid:!1,row:e}):this.skipRow(t):t(new Error("Expected result from header transform"))))}catch(e){t(e)}}checkAndEmitHeaders(){!this.headersEmitted&&this.headerTransformer.headers&&(this.headersEmitted=!0,this.emit("headers",this.headerTransformer.headers))}skipRow(e){return this.rowCount-=1,e(null,{row:null,isValid:!0})}pushRow(e,t){try{this.parserOptions.objectMode?this.push(e):this.push(JSON.stringify(e)),t()}catch(e){t(e)}}static wrapDoneCallback(e){let t=!1;return(r,...n)=>{if(r){if(t)throw r;return t=!0,void e(r)}e(...n)}}}t.CsvParserStream=a},793:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ParserOptions=void 0;const o=n(r(912)),i=n(r(733));t.ParserOptions=class{escapedDelimiter;objectMode=!0;delimiter=",";ignoreEmpty=!1;quote='"';escape=null;escapeChar=this.quote;comment=null;supportsComments=!1;ltrim=!1;rtrim=!1;trim=!1;headers=null;renameHeaders=!1;strictColumnHandling=!1;discardUnmappedColumns=!1;carriageReturn="\r";NEXT_TOKEN_REGEXP;encoding="utf8";limitRows=!1;maxRows=0;skipLines=0;skipRows=0;constructor(e){if(Object.assign(this,e||{}),this.delimiter.length>1)throw new Error("delimiter option must be one character long");this.escapedDelimiter=(0,o.default)(this.delimiter),this.escapeChar=this.escape??this.quote,this.supportsComments=!(0,i.default)(this.comment),this.NEXT_TOKEN_REGEXP=new RegExp(`([^\\s]|\\r\\n|\\n|\\r|${this.escapedDelimiter})`),this.maxRows>0&&(this.limitRows=!0)}}},190:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return o(t,e),t},s=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),t.parseString=t.parseFile=t.parseStream=t.parse=t.ParserOptions=t.CsvParserStream=void 0;const a=i(r(896)),u=r(203),c=r(793),l=r(273);s(r(331),t);var f=r(273);Object.defineProperty(t,"CsvParserStream",{enumerable:!0,get:function(){return f.CsvParserStream}});var h=r(793);Object.defineProperty(t,"ParserOptions",{enumerable:!0,get:function(){return h.ParserOptions}}),t.parse=e=>new l.CsvParserStream(new c.ParserOptions(e)),t.parseStream=(e,t)=>e.pipe(new l.CsvParserStream(new c.ParserOptions(t))),t.parseFile=(e,t={})=>a.createReadStream(e).pipe(new l.CsvParserStream(new c.ParserOptions(t))),t.parseString=(e,t)=>{const r=new u.Readable;return r.push(e),r.push(null),r.pipe(new l.CsvParserStream(new c.ParserOptions(t)))}},381:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Parser=void 0;const n=r(366),o=r(291),i=r(757);class s{static removeBOM(e){return e&&65279===e.charCodeAt(0)?e.slice(1):e}parserOptions;rowParser;constructor(e){this.parserOptions=e,this.rowParser=new o.RowParser(this.parserOptions)}parse(e,t){const r=new n.Scanner({line:s.removeBOM(e),parserOptions:this.parserOptions,hasMoreData:t});return this.parserOptions.supportsComments?this.parseWithComments(r):this.parseWithoutComments(r)}parseWithoutComments(e){const t=[];let r=!0;for(;r;)r=this.parseRow(e,t);return{line:e.line,rows:t}}parseWithComments(e){const{parserOptions:t}=this,r=[];for(let n=e.nextCharacterToken;null!==n;n=e.nextCharacterToken)if(i.Token.isTokenComment(n,t)){if(null===e.advancePastLine())return{line:e.lineFromCursor,rows:r};if(!e.hasMoreCharacters)return{line:e.lineFromCursor,rows:r};e.truncateToCursor()}else if(!this.parseRow(e,r))break;return{line:e.line,rows:r}}parseRow(e,t){if(!e.nextNonSpaceToken)return!1;const r=this.rowParser.parse(e);return null!==r&&(this.parserOptions.ignoreEmpty&&o.RowParser.isEmptyRow(r)||t.push(r),!0)}}t.Parser=s},291:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RowParser=void 0;const n=r(779),o=r(757);t.RowParser=class{static isEmptyRow(e){return""===e.join("").replace(/\s+/g,"")}parserOptions;columnParser;constructor(e){this.parserOptions=e,this.columnParser=new n.ColumnParser(e)}parse(e){const{parserOptions:t}=this,{hasMoreData:r}=e,n=e,i=[];let s=this.getStartToken(n,i);for(;s;){if(o.Token.isTokenRowDelimiter(s))return n.advancePastToken(s),!n.hasMoreCharacters&&o.Token.isTokenCarriageReturn(s,t)&&r?null:(n.truncateToCursor(),i);if(!this.shouldSkipColumnParse(n,s,i)){const e=this.columnParser.parse(n);if(null===e)return null;i.push(e)}s=n.nextNonSpaceToken}return r?null:(n.truncateToCursor(),i)}getStartToken(e,t){const r=e.nextNonSpaceToken;return null!==r&&o.Token.isTokenDelimiter(r,this.parserOptions)?(t.push(""),e.nextNonSpaceToken):r}shouldSkipColumnParse(e,t,r){const{parserOptions:n}=this;if(o.Token.isTokenDelimiter(t,n)){e.advancePastToken(t);const i=e.nextCharacterToken;if(!e.hasMoreCharacters||null!==i&&o.Token.isTokenRowDelimiter(i))return r.push(""),!0;if(null!==i&&o.Token.isTokenDelimiter(i,n))return r.push(""),!0}return!1}}},366:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Scanner=void 0;const n=r(757),o=/((?:\r\n)|\n|\r)/;t.Scanner=class{line;parserOptions;lineLength;hasMoreData;cursor=0;constructor(e){this.line=e.line,this.lineLength=this.line.length,this.parserOptions=e.parserOptions,this.hasMoreData=e.hasMoreData,this.cursor=e.cursor||0}get hasMoreCharacters(){return this.lineLength>this.cursor}get nextNonSpaceToken(){const{lineFromCursor:e}=this,t=this.parserOptions.NEXT_TOKEN_REGEXP;if(-1===e.search(t))return null;const r=t.exec(e);if(null==r)return null;const o=r[1],i=this.cursor+(r.index||0);return new n.Token({token:o,startCursor:i,endCursor:i+o.length-1})}get nextCharacterToken(){const{cursor:e,lineLength:t}=this;return t<=e?null:new n.Token({token:this.line[e],startCursor:e,endCursor:e})}get lineFromCursor(){return this.line.substr(this.cursor)}advancePastLine(){const e=o.exec(this.lineFromCursor);return e?(this.cursor+=(e.index||0)+e[0].length,this):this.hasMoreData?null:(this.cursor=this.lineLength,this)}advanceTo(e){return this.cursor=e,this}advanceToToken(e){return this.cursor=e.startCursor,this}advancePastToken(e){return this.cursor=e.endCursor+1,this}truncateToCursor(){return this.line=this.lineFromCursor,this.lineLength=this.line.length,this.cursor=0,this}}},757:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Token=void 0,t.Token=class{static isTokenRowDelimiter(e){const t=e.token;return"\r"===t||"\n"===t||"\r\n"===t}static isTokenCarriageReturn(e,t){return e.token===t.carriageReturn}static isTokenComment(e,t){return t.supportsComments&&!!e&&e.token===t.comment}static isTokenEscapeCharacter(e,t){return e.token===t.escapeChar}static isTokenQuote(e,t){return e.token===t.quote}static isTokenDelimiter(e,t){return e.token===t.delimiter}token;startCursor;endCursor;constructor(e){this.token=e.token,this.startCursor=e.startCursor,this.endCursor=e.endCursor}}},651:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ColumnFormatter=void 0,t.ColumnFormatter=class{format;constructor(e){e.trim?this.format=e=>e.trim():e.ltrim?this.format=e=>e.trimLeft():e.rtrim?this.format=e=>e.trimRight():this.format=e=>e}}},454:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ColumnParser=void 0;const n=r(353),o=r(830),i=r(757);t.ColumnParser=class{parserOptions;nonQuotedColumnParser;quotedColumnParser;constructor(e){this.parserOptions=e,this.quotedColumnParser=new o.QuotedColumnParser(e),this.nonQuotedColumnParser=new n.NonQuotedColumnParser(e)}parse(e){const{nextNonSpaceToken:t}=e;return null!==t&&i.Token.isTokenQuote(t,this.parserOptions)?(e.advanceToToken(t),this.quotedColumnParser.parse(e)):this.nonQuotedColumnParser.parse(e)}}},353:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NonQuotedColumnParser=void 0;const n=r(651),o=r(757);t.NonQuotedColumnParser=class{parserOptions;columnFormatter;constructor(e){this.parserOptions=e,this.columnFormatter=new n.ColumnFormatter(e)}parse(e){if(!e.hasMoreCharacters)return null;const{parserOptions:t}=this,r=[];let n=e.nextCharacterToken;for(;n&&!o.Token.isTokenDelimiter(n,t)&&!o.Token.isTokenRowDelimiter(n);n=e.nextCharacterToken)r.push(n.token),e.advancePastToken(n);return this.columnFormatter.format(r.join(""))}}},830:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.QuotedColumnParser=void 0;const n=r(651),o=r(757);t.QuotedColumnParser=class{parserOptions;columnFormatter;constructor(e){this.parserOptions=e,this.columnFormatter=new n.ColumnFormatter(e)}parse(e){if(!e.hasMoreCharacters)return null;const t=e.cursor,{foundClosingQuote:r,col:n}=this.gatherDataBetweenQuotes(e);if(!r){if(e.advanceTo(t),!e.hasMoreData)throw new Error(`Parse Error: missing closing: '${this.parserOptions.quote||""}' in line: at '${e.lineFromCursor.replace(/[\r\n]/g,"\\n'")}'`);return null}return this.checkForMalformedColumn(e),n}gatherDataBetweenQuotes(e){const{parserOptions:t}=this;let r=!1,n=!1;const i=[];let s=e.nextCharacterToken;for(;!n&&null!==s;s=e.nextCharacterToken){const a=o.Token.isTokenQuote(s,t);if(!r&&a)r=!0;else if(r)if(o.Token.isTokenEscapeCharacter(s,t)){e.advancePastToken(s);const r=e.nextCharacterToken;null!==r&&(o.Token.isTokenQuote(r,t)||o.Token.isTokenEscapeCharacter(r,t))?(i.push(r.token),s=r):a?n=!0:i.push(s.token)}else a?n=!0:i.push(s.token);e.advancePastToken(s)}return{col:this.columnFormatter.format(i.join("")),foundClosingQuote:n}}checkForMalformedColumn(e){const{parserOptions:t}=this,{nextNonSpaceToken:r}=e;if(r){const n=o.Token.isTokenDelimiter(r,t),i=o.Token.isTokenRowDelimiter(r);if(!n&&!i){const n=e.lineFromCursor.substr(0,10).replace(/[\r\n]/g,"\\n'");throw new Error(`Parse Error: expected: '${t.escapedDelimiter}' OR new line got: '${r.token}'. at '${n}'`)}e.advanceToToken(r)}else e.hasMoreData||e.advancePastLine()}}},779:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ColumnFormatter=t.QuotedColumnParser=t.NonQuotedColumnParser=t.ColumnParser=void 0;var n=r(454);Object.defineProperty(t,"ColumnParser",{enumerable:!0,get:function(){return n.ColumnParser}});var o=r(353);Object.defineProperty(t,"NonQuotedColumnParser",{enumerable:!0,get:function(){return o.NonQuotedColumnParser}});var i=r(830);Object.defineProperty(t,"QuotedColumnParser",{enumerable:!0,get:function(){return i.QuotedColumnParser}});var s=r(651);Object.defineProperty(t,"ColumnFormatter",{enumerable:!0,get:function(){return s.ColumnFormatter}})},856:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.QuotedColumnParser=t.NonQuotedColumnParser=t.ColumnParser=t.Token=t.Scanner=t.RowParser=t.Parser=void 0;var n=r(381);Object.defineProperty(t,"Parser",{enumerable:!0,get:function(){return n.Parser}});var o=r(291);Object.defineProperty(t,"RowParser",{enumerable:!0,get:function(){return o.RowParser}});var i=r(366);Object.defineProperty(t,"Scanner",{enumerable:!0,get:function(){return i.Scanner}});var s=r(757);Object.defineProperty(t,"Token",{enumerable:!0,get:function(){return s.Token}});var a=r(779);Object.defineProperty(t,"ColumnParser",{enumerable:!0,get:function(){return a.ColumnParser}}),Object.defineProperty(t,"NonQuotedColumnParser",{enumerable:!0,get:function(){return a.NonQuotedColumnParser}}),Object.defineProperty(t,"QuotedColumnParser",{enumerable:!0,get:function(){return a.QuotedColumnParser}})},854:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.HeaderTransformer=void 0;const o=n(r(254)),i=n(r(710)),s=n(r(879)),a=n(r(324));t.HeaderTransformer=class{parserOptions;headers=null;receivedHeaders=!1;shouldUseFirstRow=!1;processedFirstRow=!1;headersLength=0;headersTransform;constructor(e){this.parserOptions=e,!0===e.headers?this.shouldUseFirstRow=!0:Array.isArray(e.headers)?this.setHeaders(e.headers):(0,i.default)(e.headers)&&(this.headersTransform=e.headers)}transform(e,t){return this.shouldMapRow(e)?t(null,this.processRow(e)):t(null,{row:null,isValid:!0})}shouldMapRow(e){const{parserOptions:t}=this;if(!this.headersTransform&&t.renameHeaders&&!this.processedFirstRow){if(!this.receivedHeaders)throw new Error("Error renaming headers: new headers must be provided in an array");return this.processedFirstRow=!0,!1}if(!this.receivedHeaders&&Array.isArray(e)){if(this.headersTransform)this.setHeaders(this.headersTransform(e));else{if(!this.shouldUseFirstRow)return!0;this.setHeaders(e)}return!1}return!0}processRow(e){if(!this.headers)return{row:e,isValid:!0};const{parserOptions:t}=this;if(!t.discardUnmappedColumns&&e.length>this.headersLength){if(!t.strictColumnHandling)throw new Error(`Unexpected Error: column header mismatch expected: ${this.headersLength} columns got: ${e.length}`);return{row:e,isValid:!1,reason:`Column header mismatch expected: ${this.headersLength} columns got: ${e.length}`}}return t.strictColumnHandling&&e.length<this.headersLength?{row:e,isValid:!1,reason:`Column header mismatch expected: ${this.headersLength} columns got: ${e.length}`}:{row:this.mapHeaders(e),isValid:!0}}mapHeaders(e){const t={},{headers:r,headersLength:n}=this;for(let i=0;i<n;i+=1){const n=r[i];if(!(0,o.default)(n)){const r=e[i];(0,o.default)(r)?t[n]="":t[n]=r}}return t}setHeaders(e){const t=e.filter((e=>!!e));if((0,s.default)(t).length!==t.length){const e=(0,a.default)(t),r=Object.keys(e).filter((t=>e[t].length>1));throw new Error(`Duplicate headers found ${JSON.stringify(r)}`)}this.headers=e,this.receivedHeaders=!0,this.headersLength=this.headers?.length||0}}},701:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.RowTransformerValidator=void 0;const o=n(r(710)),i=r(331);class s{static createTransform(e){return(0,i.isSyncTransform)(e)?(t,r)=>{let n=null;try{n=e(t)}catch(e){return r(e)}return r(null,n)}:e}static createValidator(e){return(0,i.isSyncValidate)(e)?(t,r)=>{r(null,{row:t,isValid:e(t)})}:(t,r)=>{e(t,((e,n,o)=>e?r(e):r(null,n?{row:t,isValid:n,reason:o}:{row:t,isValid:!1,reason:o})))}}_rowTransform=null;_rowValidator=null;set rowTransform(e){if(!(0,o.default)(e))throw new TypeError("The transform should be a function");this._rowTransform=s.createTransform(e)}set rowValidator(e){if(!(0,o.default)(e))throw new TypeError("The validate should be a function");this._rowValidator=s.createValidator(e)}transformAndValidate(e,t){return this.callTransformer(e,((e,r)=>e?t(e):r?this.callValidator(r,((e,n)=>e?t(e):n&&!n.isValid?t(null,{row:r,isValid:!1,reason:n.reason}):t(null,{row:r,isValid:!0}))):t(null,{row:null,isValid:!0})))}callTransformer(e,t){return this._rowTransform?this._rowTransform(e,t):t(null,e)}callValidator(e,t){return this._rowValidator?this._rowValidator(e,t):t(null,{row:e,isValid:!0})}}t.RowTransformerValidator=s},698:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HeaderTransformer=t.RowTransformerValidator=void 0;var n=r(701);Object.defineProperty(t,"RowTransformerValidator",{enumerable:!0,get:function(){return n.RowTransformerValidator}});var o=r(854);Object.defineProperty(t,"HeaderTransformer",{enumerable:!0,get:function(){return o.HeaderTransformer}})},331:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isSyncValidate=t.isSyncTransform=void 0,t.isSyncTransform=e=>1===e.length,t.isSyncValidate=e=>1===e.length},912:e=>{var t=/[\\^$.*+?()[\]{}|]/g,r=RegExp(t.source),n="object"==typeof global&&global&&global.Object===Object&&global,o="object"==typeof self&&self&&self.Object===Object&&self,i=n||o||Function("return this")(),s=Object.prototype.toString,a=i.Symbol,u=a?a.prototype:void 0,c=u?u.toString:void 0;e.exports=function(e){var n;return(e=null==(n=e)?"":function(e){if("string"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&"[object Symbol]"==s.call(e)}(e))return c?c.call(e):"";var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}(n))&&r.test(e)?e.replace(t,"\\$&"):e}},324:(e,t,r)=>{e=r.nmd(e);var n="__lodash_hash_undefined__",o=9007199254740991,i="[object Arguments]",s="[object Array]",a="[object Boolean]",u="[object Date]",c="[object Error]",l="[object Function]",f="[object Map]",h="[object Number]",d="[object Object]",p="[object Promise]",m="[object RegExp]",g="[object Set]",v="[object String]",_="[object Symbol]",w="[object WeakMap]",y="[object ArrayBuffer]",b="[object DataView]",P=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,O=/^\w*$/,j=/^\./,C=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,T=/\\(\\)?/g,k=/^\[object .+?Constructor\]$/,S=/^(?:0|[1-9]\d*)$/,x={};x["[object Float32Array]"]=x["[object Float64Array]"]=x["[object Int8Array]"]=x["[object Int16Array]"]=x["[object Int32Array]"]=x["[object Uint8Array]"]=x["[object Uint8ClampedArray]"]=x["[object Uint16Array]"]=x["[object Uint32Array]"]=!0,x[i]=x[s]=x[y]=x[a]=x[b]=x[u]=x[c]=x[l]=x[f]=x[h]=x[d]=x[m]=x[g]=x[v]=x[w]=!1;var R="object"==typeof global&&global&&global.Object===Object&&global,M="object"==typeof self&&self&&self.Object===Object&&self,E=R||M||Function("return this")(),D=t&&!t.nodeType&&t,F=D&&e&&!e.nodeType&&e,A=F&&F.exports===D&&R.process,$=function(){try{return A&&A.binding("util")}catch(e){}}(),V=$&&$.isTypedArray;function L(e,t,r,n){for(var o=-1,i=e?e.length:0;++o<i;){var s=e[o];t(n,s,r(s),e)}return n}function N(e,t){for(var r=-1,n=e?e.length:0;++r<n;)if(t(e[r],r,e))return!0;return!1}function H(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}function Q(e){var t=-1,r=Array(e.size);return e.forEach((function(e,n){r[++t]=[n,e]})),r}function I(e){var t=-1,r=Array(e.size);return e.forEach((function(e){r[++t]=e})),r}var q,J,U,B=Array.prototype,W=Function.prototype,z=Object.prototype,G=E["__core-js_shared__"],X=(q=/[^.]+$/.exec(G&&G.keys&&G.keys.IE_PROTO||""))?"Symbol(src)_1."+q:"",K=W.toString,Y=z.hasOwnProperty,Z=z.toString,ee=RegExp("^"+K.call(Y).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),te=E.Symbol,re=E.Uint8Array,ne=z.propertyIsEnumerable,oe=B.splice,ie=(J=Object.keys,U=Object,function(e){return J(U(e))}),se=$e(E,"DataView"),ae=$e(E,"Map"),ue=$e(E,"Promise"),ce=$e(E,"Set"),le=$e(E,"WeakMap"),fe=$e(Object,"create"),he=Je(se),de=Je(ae),pe=Je(ue),me=Je(ce),ge=Je(le),ve=te?te.prototype:void 0,_e=ve?ve.valueOf:void 0,we=ve?ve.toString:void 0;function ye(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function be(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function Pe(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function Oe(e){var t=-1,r=e?e.length:0;for(this.__data__=new Pe;++t<r;)this.add(e[t])}function je(e){this.__data__=new be(e)}function Ce(e,t){for(var r=e.length;r--;)if(ze(e[r][0],t))return r;return-1}function Te(e,t,r,n){return Se(e,(function(e,o,i){t(n,e,r(e),i)})),n}ye.prototype.clear=function(){this.__data__=fe?fe(null):{}},ye.prototype.delete=function(e){return this.has(e)&&delete this.__data__[e]},ye.prototype.get=function(e){var t=this.__data__;if(fe){var r=t[e];return r===n?void 0:r}return Y.call(t,e)?t[e]:void 0},ye.prototype.has=function(e){var t=this.__data__;return fe?void 0!==t[e]:Y.call(t,e)},ye.prototype.set=function(e,t){return this.__data__[e]=fe&&void 0===t?n:t,this},be.prototype.clear=function(){this.__data__=[]},be.prototype.delete=function(e){var t=this.__data__,r=Ce(t,e);return!(r<0||(r==t.length-1?t.pop():oe.call(t,r,1),0))},be.prototype.get=function(e){var t=this.__data__,r=Ce(t,e);return r<0?void 0:t[r][1]},be.prototype.has=function(e){return Ce(this.__data__,e)>-1},be.prototype.set=function(e,t){var r=this.__data__,n=Ce(r,e);return n<0?r.push([e,t]):r[n][1]=t,this},Pe.prototype.clear=function(){this.__data__={hash:new ye,map:new(ae||be),string:new ye}},Pe.prototype.delete=function(e){return Ae(this,e).delete(e)},Pe.prototype.get=function(e){return Ae(this,e).get(e)},Pe.prototype.has=function(e){return Ae(this,e).has(e)},Pe.prototype.set=function(e,t){return Ae(this,e).set(e,t),this},Oe.prototype.add=Oe.prototype.push=function(e){return this.__data__.set(e,n),this},Oe.prototype.has=function(e){return this.__data__.has(e)},je.prototype.clear=function(){this.__data__=new be},je.prototype.delete=function(e){return this.__data__.delete(e)},je.prototype.get=function(e){return this.__data__.get(e)},je.prototype.has=function(e){return this.__data__.has(e)},je.prototype.set=function(e,t){var r=this.__data__;if(r instanceof be){var n=r.__data__;if(!ae||n.length<199)return n.push([e,t]),this;r=this.__data__=new Pe(n)}return r.set(e,t),this};var ke,Se=(ke=function(e,t){return e&&xe(e,t,ot)},function(e,t){if(null==e)return e;if(!Ke(e))return ke(e,t);for(var r=e.length,n=-1,o=Object(e);++n<r&&!1!==t(o[n],n,o););return e}),xe=function(e,t,r){for(var n=-1,o=Object(e),i=r(e),s=i.length;s--;){var a=i[++n];if(!1===t(o[a],a,o))break}return e};function Re(e,t){for(var r=0,n=(t=Ne(t,e)?[t]:De(t)).length;null!=e&&r<n;)e=e[qe(t[r++])];return r&&r==n?e:void 0}function Me(e,t){return null!=e&&t in Object(e)}function Ee(e,t,r,n,o){return e===t||(null==e||null==t||!et(e)&&!tt(t)?e!=e&&t!=t:function(e,t,r,n,o,l){var p=Xe(e),w=Xe(t),P=s,O=s;p||(P=(P=Ve(e))==i?d:P),w||(O=(O=Ve(t))==i?d:O);var j=P==d&&!H(e),C=O==d&&!H(t),T=P==O;if(T&&!j)return l||(l=new je),p||nt(e)?Fe(e,t,r,n,o,l):function(e,t,r,n,o,i,s){switch(r){case b:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case y:return!(e.byteLength!=t.byteLength||!n(new re(e),new re(t)));case a:case u:case h:return ze(+e,+t);case c:return e.name==t.name&&e.message==t.message;case m:case v:return e==t+"";case f:var l=Q;case g:var d=2&i;if(l||(l=I),e.size!=t.size&&!d)return!1;var p=s.get(e);if(p)return p==t;i|=1,s.set(e,t);var w=Fe(l(e),l(t),n,o,i,s);return s.delete(e),w;case _:if(_e)return _e.call(e)==_e.call(t)}return!1}(e,t,P,r,n,o,l);if(!(2&o)){var k=j&&Y.call(e,"__wrapped__"),S=C&&Y.call(t,"__wrapped__");if(k||S){var x=k?e.value():e,R=S?t.value():t;return l||(l=new je),r(x,R,n,o,l)}}return!!T&&(l||(l=new je),function(e,t,r,n,o,i){var s=2&o,a=ot(e),u=a.length;if(u!=ot(t).length&&!s)return!1;for(var c=u;c--;){var l=a[c];if(!(s?l in t:Y.call(t,l)))return!1}var f=i.get(e);if(f&&i.get(t))return f==t;var h=!0;i.set(e,t),i.set(t,e);for(var d=s;++c<u;){var p=e[l=a[c]],m=t[l];if(n)var g=s?n(m,p,l,t,e,i):n(p,m,l,e,t,i);if(!(void 0===g?p===m||r(p,m,n,o,i):g)){h=!1;break}d||(d="constructor"==l)}if(h&&!d){var v=e.constructor,_=t.constructor;v==_||!("constructor"in e)||!("constructor"in t)||"function"==typeof v&&v instanceof v&&"function"==typeof _&&_ instanceof _||(h=!1)}return i.delete(e),i.delete(t),h}(e,t,r,n,o,l))}(e,t,Ee,r,n,o))}function De(e){return Xe(e)?e:Ie(e)}function Fe(e,t,r,n,o,i){var s=2&o,a=e.length,u=t.length;if(a!=u&&!(s&&u>a))return!1;var c=i.get(e);if(c&&i.get(t))return c==t;var l=-1,f=!0,h=1&o?new Oe:void 0;for(i.set(e,t),i.set(t,e);++l<a;){var d=e[l],p=t[l];if(n)var m=s?n(p,d,l,t,e,i):n(d,p,l,e,t,i);if(void 0!==m){if(m)continue;f=!1;break}if(h){if(!N(t,(function(e,t){if(!h.has(t)&&(d===e||r(d,e,n,o,i)))return h.add(t)}))){f=!1;break}}else if(d!==p&&!r(d,p,n,o,i)){f=!1;break}}return i.delete(e),i.delete(t),f}function Ae(e,t){var r,n,o=e.__data__;return("string"==(n=typeof(r=t))||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==r:null===r)?o["string"==typeof t?"string":"hash"]:o.map}function $e(e,t){var r=function(e,t){return null==e?void 0:e[t]}(e,t);return function(e){return!(!et(e)||function(e){return!!X&&X in e}(e))&&(Ye(e)||H(e)?ee:k).test(Je(e))}(r)?r:void 0}var Ve=function(e){return Z.call(e)};function Le(e,t){return!!(t=null==t?o:t)&&("number"==typeof e||S.test(e))&&e>-1&&e%1==0&&e<t}function Ne(e,t){if(Xe(e))return!1;var r=typeof e;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=e&&!rt(e))||O.test(e)||!P.test(e)||null!=t&&e in Object(t)}function He(e){return e==e&&!et(e)}function Qe(e,t){return function(r){return null!=r&&r[e]===t&&(void 0!==t||e in Object(r))}}(se&&Ve(new se(new ArrayBuffer(1)))!=b||ae&&Ve(new ae)!=f||ue&&Ve(ue.resolve())!=p||ce&&Ve(new ce)!=g||le&&Ve(new le)!=w)&&(Ve=function(e){var t=Z.call(e),r=t==d?e.constructor:void 0,n=r?Je(r):void 0;if(n)switch(n){case he:return b;case de:return f;case pe:return p;case me:return g;case ge:return w}return t});var Ie=We((function(e){var t;e=null==(t=e)?"":function(e){if("string"==typeof e)return e;if(rt(e))return we?we.call(e):"";var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}(t);var r=[];return j.test(e)&&r.push(""),e.replace(C,(function(e,t,n,o){r.push(n?o.replace(T,"$1"):t||e)})),r}));function qe(e){if("string"==typeof e||rt(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function Je(e){if(null!=e){try{return K.call(e)}catch(e){}try{return e+""}catch(e){}}return""}var Ue,Be=(Ue=function(e,t,r){Y.call(e,r)?e[r].push(t):e[r]=[t]},function(e,t){var r,n,o,i,s,a={};return(Xe(e)?L:Te)(e,Ue,"function"==typeof(r=t)?r:null==r?it:"object"==typeof r?Xe(r)?function(e,t){return Ne(e)&&He(t)?Qe(qe(e),t):function(r){var n=function(e,t){var r=null==e?void 0:Re(e,t);return void 0===r?void 0:r}(r,e);return void 0===n&&n===t?function(e,t){return null!=e&&function(e,t,r){for(var n,o=-1,i=(t=Ne(t,e)?[t]:De(t)).length;++o<i;){var s=qe(t[o]);if(!(n=null!=e&&r(e,s)))break;e=e[s]}return n||!!(i=e?e.length:0)&&Ze(i)&&Le(s,i)&&(Xe(e)||Ge(e))}(e,t,Me)}(r,e):Ee(t,n,void 0,3)}}(r[0],r[1]):1==(o=function(e){for(var t=ot(e),r=t.length;r--;){var n=t[r],o=e[n];t[r]=[n,o,He(o)]}return t}(n=r)).length&&o[0][2]?Qe(o[0][0],o[0][1]):function(e){return e===n||function(e,t,r,n){var o=r.length,i=o;if(null==e)return!i;for(e=Object(e);o--;){var s=r[o];if(s[2]?s[1]!==e[s[0]]:!(s[0]in e))return!1}for(;++o<i;){var a=(s=r[o])[0],u=e[a],c=s[1];if(s[2]){if(void 0===u&&!(a in e))return!1}else{var l,f=new je;if(!(void 0===l?Ee(c,u,n,3,f):l))return!1}}return!0}(e,0,o)}:Ne(i=r)?(s=qe(i),function(e){return null==e?void 0:e[s]}):function(e){return function(t){return Re(t,e)}}(i),a)});function We(e,t){if("function"!=typeof e||t&&"function"!=typeof t)throw new TypeError("Expected a function");var r=function(){var n=arguments,o=t?t.apply(this,n):n[0],i=r.cache;if(i.has(o))return i.get(o);var s=e.apply(this,n);return r.cache=i.set(o,s),s};return r.cache=new(We.Cache||Pe),r}function ze(e,t){return e===t||e!=e&&t!=t}function Ge(e){return function(e){return tt(e)&&Ke(e)}(e)&&Y.call(e,"callee")&&(!ne.call(e,"callee")||Z.call(e)==i)}We.Cache=Pe;var Xe=Array.isArray;function Ke(e){return null!=e&&Ze(e.length)&&!Ye(e)}function Ye(e){var t=et(e)?Z.call(e):"";return t==l||"[object GeneratorFunction]"==t}function Ze(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=o}function et(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function tt(e){return!!e&&"object"==typeof e}function rt(e){return"symbol"==typeof e||tt(e)&&Z.call(e)==_}var nt=V?function(e){return function(t){return e(t)}}(V):function(e){return tt(e)&&Ze(e.length)&&!!x[Z.call(e)]};function ot(e){return Ke(e)?function(e,t){var r=Xe(e)||Ge(e)?function(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}(e.length,String):[],n=r.length,o=!!n;for(var i in e)!t&&!Y.call(e,i)||o&&("length"==i||Le(i,n))||r.push(i);return r}(e):function(e){if(r=(t=e)&&t.constructor,t!==("function"==typeof r&&r.prototype||z))return ie(e);var t,r,n=[];for(var o in Object(e))Y.call(e,o)&&"constructor"!=o&&n.push(o);return n}(e)}function it(e){return e}e.exports=Be},710:e=>{var t="object"==typeof global&&global&&global.Object===Object&&global,r="object"==typeof self&&self&&self.Object===Object&&self,n=t||r||Function("return this")(),o=Object.prototype,i=o.hasOwnProperty,s=o.toString,a=n.Symbol,u=a?a.toStringTag:void 0;e.exports=function(e){if(!function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}(e))return!1;var t=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":u&&u in Object(e)?function(e){var t=i.call(e,u),r=e[u];try{e[u]=void 0;var n=!0}catch(e){}var o=s.call(e);return n&&(t?e[u]=r:delete e[u]),o}(e):function(e){return s.call(e)}(e)}(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}},733:e=>{e.exports=function(e){return null==e}},254:e=>{e.exports=function(e){return void 0===e}},879:e=>{var t="__lodash_hash_undefined__",r=/^\[object .+?Constructor\]$/,n="object"==typeof global&&global&&global.Object===Object&&global,o="object"==typeof self&&self&&self.Object===Object&&self,i=n||o||Function("return this")();function s(e,t){return!(!e||!e.length)&&function(e,t){if(t!=t)return function(e,t){for(var r=e.length,n=-1;++n<r;)if(t(e[n],n,e))return n;return-1}(e,a);for(var r=-1,n=e.length;++r<n;)if(e[r]===t)return r;return-1}(e,t)>-1}function a(e){return e!=e}function u(e,t){return e.has(t)}function c(e){var t=-1,r=Array(e.size);return e.forEach((function(e){r[++t]=e})),r}var l,f=Array.prototype,h=Function.prototype,d=Object.prototype,p=i["__core-js_shared__"],m=(l=/[^.]+$/.exec(p&&p.keys&&p.keys.IE_PROTO||""))?"Symbol(src)_1."+l:"",g=h.toString,v=d.hasOwnProperty,_=d.toString,w=RegExp("^"+g.call(v).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),y=f.splice,b=M(i,"Map"),P=M(i,"Set"),O=M(Object,"create");function j(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function C(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function T(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function k(e){var t=-1,r=e?e.length:0;for(this.__data__=new T;++t<r;)this.add(e[t])}function S(e,t){for(var r,n,o=e.length;o--;)if((r=e[o][0])===(n=t)||r!=r&&n!=n)return o;return-1}j.prototype.clear=function(){this.__data__=O?O(null):{}},j.prototype.delete=function(e){return this.has(e)&&delete this.__data__[e]},j.prototype.get=function(e){var r=this.__data__;if(O){var n=r[e];return n===t?void 0:n}return v.call(r,e)?r[e]:void 0},j.prototype.has=function(e){var t=this.__data__;return O?void 0!==t[e]:v.call(t,e)},j.prototype.set=function(e,r){return this.__data__[e]=O&&void 0===r?t:r,this},C.prototype.clear=function(){this.__data__=[]},C.prototype.delete=function(e){var t=this.__data__,r=S(t,e);return!(r<0||(r==t.length-1?t.pop():y.call(t,r,1),0))},C.prototype.get=function(e){var t=this.__data__,r=S(t,e);return r<0?void 0:t[r][1]},C.prototype.has=function(e){return S(this.__data__,e)>-1},C.prototype.set=function(e,t){var r=this.__data__,n=S(r,e);return n<0?r.push([e,t]):r[n][1]=t,this},T.prototype.clear=function(){this.__data__={hash:new j,map:new(b||C),string:new j}},T.prototype.delete=function(e){return R(this,e).delete(e)},T.prototype.get=function(e){return R(this,e).get(e)},T.prototype.has=function(e){return R(this,e).has(e)},T.prototype.set=function(e,t){return R(this,e).set(e,t),this},k.prototype.add=k.prototype.push=function(e){return this.__data__.set(e,t),this},k.prototype.has=function(e){return this.__data__.has(e)};var x=P&&1/c(new P([,-0]))[1]==1/0?function(e){return new P(e)}:function(){};function R(e,t){var r,n,o=e.__data__;return("string"==(n=typeof(r=t))||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==r:null===r)?o["string"==typeof t?"string":"hash"]:o.map}function M(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return function(e){if(!E(e)||m&&m in e)return!1;var t=function(e){var t=E(e)?_.call(e):"";return"[object Function]"==t||"[object GeneratorFunction]"==t}(e)||function(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}(e)?w:r;return t.test(function(e){if(null!=e){try{return g.call(e)}catch(e){}try{return e+""}catch(e){}}return""}(e))}(n)?n:void 0}function E(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}e.exports=function(e){return e&&e.length?function(e,t,r){var n=-1,o=s,i=e.length,a=!0,l=[],f=l;if(i>=200){var h=x(e);if(h)return c(h);a=!1,o=u,f=new k}else f=l;e:for(;++n<i;){var d=e[n],p=d;if(d=0!==d?d:0,a&&p==p){for(var m=f.length;m--;)if(f[m]===p)continue e;l.push(d)}else o(f,p,r)||(f!==l&&f.push(p),l.push(d))}return l}(e):[]}},138:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.jsmFormatter=function(e){let t=0,r="",n=[],s="",a=/\s+/g,u=[],c=0;for(let n=0;n<e.lineCount;n++){let o=e.lineAt(n).text,i=o.split(a);if(!o.startsWith(".")&&!o.startsWith("*"))for(let e=0;e<i.length;e++)t<i[e].length&&(t=i[e].length,r=i[e])}for(let t=0;t<e.lineCount;t++){let r=e.lineAt(t).text;if(!/(^\.|\*|#|(\s+\n))/.test(r)){n=r.split(a);for(let e=0;e<n.length-1;e++)if(s+=n[e],n[e].includes("(")&&(c=1),n[e].includes(")")&&(c=0),0==c){let t=0,r=n[e+1].length;for(0==e&&(r+=n[e].length),t=i-r;t<1;)t+=16;for(let e=0;e<t;e++)s+=" "}else s+=" ";s+=n.pop(),u.push(o.default.TextEdit.replace(e.lineAt(t).range,s)),s="",c=0}}return u};const o=n(r(398)),i=o.default.workspace.getConfiguration("formatter").get("wordSpacing")},927:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return o(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.activate=function(e){e.subscriptions.push(s.languages.registerHoverProvider(f,new d)),e.subscriptions.push(s.languages.registerDefinitionProvider(f,new p));const t=s.languages.createDiagnosticCollection("jsm_report");for(let t=0;t<m.length;t++)e.subscriptions.push(m[t]);s.window.activeTextEditor&&(0,c.checkSyntax)(s.window.activeTextEditor.document,t),e.subscriptions.push(s.window.onDidChangeActiveTextEditor((e=>{e&&(0,c.checkSyntax)(e.document,t)}))),e.subscriptions.push(s.workspace.onDidChangeTextDocument((e=>{s.window.activeTextEditor&&(0,c.checkSyntax)(s.window.activeTextEditor.document,t)})))},t.deactivate=function(){};const s=i(r(398)),a=r(751),u=r(209),c=r(514),l=r(138),f={scheme:"file",language:"josim"};function h(e,t){const r=e.getWordRangeAtPosition(t,/[\.a-zA-Z0-9_]+/);if(r)return e.lineAt(t.line).text.slice(r.start.character,r.end.character);throw console.log(`wordRange: ${r}`)}class d{async provideHover(e,t,r){const n=h(e,t);let o=await(0,a.superFinder)(e,n,"range"),i=new s.MarkdownString;return i.appendCodeblock(o,"josim"),Promise.resolve(new s.Hover(i))}}class p{async provideDefinition(e,t,r){const n=h(e,t);return(0,a.superFinder)(e,n,"loc")}}let m=[];m.concat(s.commands.registerCommand("josim-cli.executeSimulation",(()=>{const e=s.window.activeTextEditor;if(e){e.document.save();const t=e.document.uri;(0,u.showSimulationResult)(t)}}))),m.concat(s.languages.registerDocumentFormattingEditProvider("josim",{provideDocumentFormattingEdits:e=>(0,l.jsmFormatter)(e)})),m.concat(s.commands.registerCommand("josim-cli.executeSimulationNoPlot",(()=>{const e=s.window.activeTextEditor;if(e){e.document.save();const t=e.document.uri;(0,u.executeJosimCli)(t)}})))},209:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return o(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.showSimulationResult=async function(e){let t=e.fsPath;if(!t.includes(" "))return j(await O(l.dirname(t)+"/josim_resultCSV")),u.window.withProgress({location:u.ProgressLocation.Notification,title:"",cancellable:!0},(async(e,r)=>{r.onCancellationRequested((()=>{console.log("User canceled the long running operation")})),e.report({increment:0}),e.report({increment:10,message:"Simulation progressing"});let n=await b(t);e.report({increment:70,message:"Exporting output file"});let o=await async function(e){let t,r=" ",n=" ",o=" ",s=" ",a=" ",l=[],b=[],O=[],j=[],C=[],T=[],k=[],S=[],x=[],R=[],M=0,E=0,D=0;const F=/^P/,A=/^I/,$=/^V/;h=u.workspace.getConfiguration("saveImage"),d=h.get("Format"),p=h.get("Width"),m=h.get("Height"),g=h.get("fontsize"),v=u.workspace.getConfiguration("tmpFiles"),_=v.get("saveCount"),w=u.workspace.getConfiguration("graph"),y=w.get("timescale");const V=y.substr(0,1),L={title:"Time ["+V+"s]",showexponent:"all",exponentformat:"e"},N={family:"Times New Roman",size:g};let H=e=>({xaxis:L,yaxis:{title:e},font:N}),Q={xaxis:L,yaxis:{title:"Phase [rad]",tickvals:[],ticktext:[],tickmode:"array",tickangle:"auto"},font:N};const I={responsive:!0,modeBarButtonsToRemove:["toImage"],editable:!0};let q=await function(e){return new Promise(((t,r)=>{const n=c.createReadStream(e).pipe(f.parse());n.on("error",(e=>r(e)));const o=[];n.on("data",(e=>o.push(e))),n.on("end",(()=>t(o)))}))}(e);j=q[0],q.shift(),j.shift();const J=P(q);let U=0;switch(V){case"m":U=1e3;break;case"u":U=1e6;break;case"n":U=1e9;break;case"p":U=1e12;break;case"f":U=1e15}for(l=J[0].map((e=>e*U)),b=J,b.shift(),i=0;i<j.length;i++)F.test(j[i])&&(M=1),A.test(j[i])&&(E=1),$.test(j[i])&&(D=1);for(i=0;i<j.length;i++)O={x:l,y:b[i],name:j[i],type:"scatter"},C.push(O);for(i=0;i<j.length;i++)F.test(j[i])?(C[i].y=C[i].y.map((e=>e/Math.PI)),T.push(C[i])):A.test(j[i])?(C[i].y=C[i].y.map((e=>1e6*e)),k.push(C[i])):$.test(j[i])&&(C[i].y=C[i].y.map((e=>1e6*e)),S.push(C[i]));if(M>0){const e=function(e,t){return Math.max(e,t)},t=function(e,t){return Math.min(e,t)};for(let r=0;r<Object.keys(T).length;r++)x.push(T[r].y.reduce(e)),R.push(T[r].y.reduce(t));const i=Math.trunc(x.reduce(e));for(let e=Math.trunc(R.reduce(t));e<=i;e++){let t;Q.yaxis.tickvals.push(e),t=-1==e?"𝜋":0==e?"0":1==e?"𝜋":`${String(e)}𝜋`,t+="\t",Q.yaxis.ticktext.push(t)}o=`\n        Plotly.newPlot(\n            "phasePlot",\n            ${JSON.stringify(T)},\n            ${JSON.stringify(Q)},\n            ${JSON.stringify(I)}\n        )\n        `,r+=o,n+=`<div id="phasePlot"></div>\n        <button onclick="saveAsImage('phasePlot')">↑Save as ${d}</button>\n        `}E>0&&(t="Current [μA]",s=`\n        Plotly.newPlot(\n            "currentPlot",\n            ${JSON.stringify(k)},\n            ${JSON.stringify(H(t))},\n            ${JSON.stringify(I)}\n        )\n        `,r+=s,n+=` <div id="currentPlot"></div>\n        <button onclick="saveAsImage('currentPlot')">↑Save as ${d}</button>\n        `),D>0&&(t="Voltage [μV]",a=`\n        Plotly.newPlot(\n            "voltagePlot",\n            ${JSON.stringify(S)},\n            ${JSON.stringify(H(t))},\n            ${JSON.stringify(I)}\n        )\n        `,r+=a,n+=`<div id="voltagePlot"></div>\n        <button onclick="saveAsImage('voltagePlot')">↑Save as ${d}</button>\n        `);const B=`<!DOCTYPE html>\n    <html>\n        <head>\n        <script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_SVG"><\/script>\n        <script src="https://cdn.plot.ly/plotly-latest.min.js" ><\/script>\n        </head>\n        <body>\n        ${n}\n        <script>\n            ${r}\n            function saveAsImage(id) {\n                var plotlyGraph = document.getElementById(id);\n                Plotly.toImage(plotlyGraph,${`{format: '${d}' , width: ${p}, height: ${m}}`})\n                    .then(function (url) {\n                        var a = document.createElement('a');\n                        a.href = url;\n                        a.download = 'plot.${d}';\n                        a.click();\n                    });\n            }\n        <\/script>\n        </body>\n    </html>\n  `,W=e.replace(".csv",".html");return c.writeFileSync(W,B.replace("<!DOCTYPE html>\n","")),B}(n);e.report({increment:80,message:"Loading HTML"}),function(e,t){let r=/.+\//;t=t.replace(r,""),r=/\..+/,t=t.replace(r,""),u.window.createWebviewPanel("plotData",`Plot-result: ${t}`,{viewColumn:u.ViewColumn.Two,preserveFocus:!0},{enableScripts:!0}).webview.html=e}(o,t)}));{let e="Josim file name should not have 'space', please change it.\nsuggested: "+t.replaceAll(" ","_");u.window.showErrorMessage(e)}},t.executeJosimCli=async function(e){let t=e.fsPath;if(!t.includes(" "))return j(await O(l.dirname(t)+"/josim_resultCSV")),u.window.withProgress({location:u.ProgressLocation.Notification,title:"",cancellable:!0},(async(e,r)=>{r.onCancellationRequested((()=>{console.log("User canceled the long running operation")})),e.report({increment:0}),e.report({increment:10,message:"Simulating......"}),await b(t),e.report({increment:100,message:"Simulation done!"})}));{let e="Josim file name should not have 'space', please change it.\nsuggested: "+t.replaceAll(" ","_");u.window.showErrorMessage(e)}};const a=r(317),u=s(r(398)),c=s(r(896)),l=s(r(928)),f=s(r(190));let h=u.workspace.getConfiguration("saveImage"),d=h.get("Format"),p=h.get("Width"),m=h.get("Height"),g=h.get("fontsize"),v=u.workspace.getConfiguration("tmpFiles"),_=v.get("saveCount"),w=u.workspace.getConfiguration("graph"),y=w.get("timescale");async function b(e){let t=String(e).replace(/\/[^\/]+$/,"");t.includes(" ")&&u.window.showInformationMessage("filename should not contain ' '."),t+="/josim_resultCSV",c.mkdir(t,(e=>{if(e)throw"err: "+e}));const r=new Date,n=t+"/jsm_out_"+(String(r.getFullYear())+String(r.getMonth()+1)+String(r.getDate()))+"_"+String(r.getHours())+String(r.getMinutes())+String(r.getSeconds())+".csv",o="josim-cli "+e+" -o "+n+" -m";return new Promise(((e,t)=>{(0,a.exec)(o,((r,o,i)=>{r&&t(u.window.showErrorMessage(i)),e(n)}))}))}const P=e=>e[0].map(((t,r)=>e.map((e=>e[r]))));async function O(e){try{const t=[],r=await u.workspace.findFiles(new u.RelativePattern(e,"*"));for(const e of r){const r=l.basename(e.fsPath),n=c.statSync(e.fsPath).birthtime.getTime();t.push({fileName:r,filePath:e.fsPath,createdTime:n})}let n=t.sort(((e,t)=>t.createdTime-e.createdTime)),o=[];return n.forEach((e=>{o.push(e.filePath)})),o}catch(e){return console.error("Error occurred while getting file names:",e),[]}}async function j(e){let t=[],r=[];for(e.forEach((e=>{t.push(e.replace(/\..+/,""))})),r=Array.from(new Set(t)),i=_-1;i<r.length;i++){let t=r[i]+"..+",n=new RegExp(t);e.filter((function(e){return e.match(n)})).forEach((e=>{c.unlinkSync(e)}))}console.log(r)}},751:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.superFinder=async function(e,t,r){let n=await async function(e){for(var t=e.getText(),r=new RegExp(/\.include\s+(\S+)/,"g"),n=t.match(r)||[],i=[],s=0;s<n.length;s++){var a=n[s].match(/\.include\s+(\S+)/m);i[s]=a[1]}if(0===i.length)return null;var u=[];for(const e of i)u.push(o.default.Uri.file(e));return u}(e);if(null!=n)for(const e of n){let n=i(await o.default.workspace.openTextDocument(e),t,r);if(null!=n)return n}return null};const o=n(r(398));function i(e,t,r){if(".subckt"==t)throw o.default.window.showInformationMessage("This is the definition.");var n=e.getText(),i=null;const s=new RegExp("^\\.subckt\\s+"+t,"m"),a=n.search(s),u=new RegExp("^"+t,"m"),c=n.search(u);if(a>-1){const s=e.positionAt(a);var l=n.replace(/[\s\n]/gm,"o");const u=l.indexOf("ends",a),c=l.indexOf("s",u),f=e.positionAt(c+1),h=new o.default.Range(s,f);i=new o.default.Location(e.uri,s);const d=e.lineAt(s).text.indexOf(t);if("loc"===r)return i;if("hitline"===r)return e.lineAt(position);if("hitchar"===r)return d;if("range"===r)return e.getText(h);console.log("mode isn't defined")}else if(c>-1){const n=e.positionAt(c),s=e.lineAt(n);i=new o.default.Location(e.uri,n);const a=e.lineAt(n).text.indexOf(t);if("loc"===r)return i;if("hitline"===r)return e.lineAt(position);if("hitchar"===r)return a;if("range"===r)return s.text;console.log("mode isn't defined")}else console.log("search failed");throw console.log(`${t} not found`)}},514:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return o(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.checkSyntax=function(e,t){const r=e.uri.fsPath;String(r).replace(/\/[^\/]+$/,"").includes(" ")&&s.window.showInformationMessage("filename should not contain ' '.");const n="josim-cli -m "+r;(0,a.exec)(n,((r,n,o)=>{t.clear();const i=o.match(/Infringing line: (.+)/);if(i){let r=i[1].replace(/ /gim,"\\s+"),n=new RegExp(`${r}`,"img"),o=e.getText().search(n),a=e.positionAt(o),u=e.lineAt(a).range;console.log(u),t.set(e.uri,[{code:"",message:"Invalid component declaration",range:u,severity:s.DiagnosticSeverity.Error,source:""}]),console.log("dignosis")}}))};const s=i(r(398)),a=r(317)},398:e=>{"use strict";e.exports=require("vscode")},317:e=>{"use strict";e.exports=require("child_process")},896:e=>{"use strict";e.exports=require("fs")},928:e=>{"use strict";e.exports=require("path")},203:e=>{"use strict";e.exports=require("stream")},193:e=>{"use strict";e.exports=require("string_decoder")}},t={};function r(n){var o=t[n];if(void 0!==o)return o.exports;var i=t[n]={id:n,loaded:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.loaded=!0,i.exports}r.nmd=e=>(e.paths=[],e.children||(e.children=[]),e);var n=r(927),o=exports;for(var i in n)o[i]=n[i];n.__esModule&&Object.defineProperty(o,"__esModule",{value:!0})})();